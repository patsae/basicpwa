# PWA (Progressive Web App)

แอปพลิเคชันที่พัฒนาด้วยเทคโนโลยีเว็บ (HTML, CSS, JavaScript) แต่สามาถใช้งานเว็บไซต์ของเรา ได้ใกล้เคียงกับ Application บนมือถือ สามารถติดตั้งลงบนเครื่องคอมพิวเตอร์หรือมือถือของเรา โดยที่ไม่ต้องติดตั้งผ่าย Play Store หรือ App Store และนอกจากนี้ยังรองรับการใช้งานแบบ Offline ทำให้สามารถใช้งานได้อย่างต่อเนื่อง

# จุดเด่นของ PWA:

1. ไม่ต้องติดตั้งผ่าน Store: เข้าหน้าเว็บผ่านเบราว์เซอร์แล้วกด "Add to Home Screen" ได้เลย ประหยัดพื้นที่เครื่อง
2. ทำงานได้แม้ไม่มีเน็ต: ใช้ระบบ Cache (Service Workers) ทำให้เปิดดูข้อมูลบางอย่างได้ตอนออฟไลน์ และโหลดหน้าเว็บได้เร็วมาก
3. ฟีเจอร์เหมือน App จริง: สามารถส่ง Push Notifications (แจ้งเตือน) ได้, เข้าถึงกล้อง/GPS และอุปกรณ์อื่นๆ ได้

# ทำไมต้องใช้ PWA:

| ปัญหา (Pain Points)     | คำอธิบาย                                                                               | PWA ช่วยได้อย่างไร?                                                                                |
| ----------------------- | -------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| 1. ขาดการเชื่อมต่อ      | จุดที่สัญญาณเข้าไม่ถึง (เช่น หน้างาน (onsite) อยู่ในจุดที่ไม่สามารถเชื่อมต่อสัญญาณได้) | Offline Mode: ระบบเก็บไฟล์หลักไว้ในเครื่อง ทำให้เปิดหน้าแอปขึ้นมาทำงานได้แม้ไม่มีเน็ต              |
| 2. เน็ตช้า/ไม่เสถียร    | สัญญาณขาดหายขณะที่ใช้งาน (เช่น ตอนขึ้นรถไฟใต้ดินหรือลงลิฟต์)                           | Service Workers: ช่วยดึงข้อมูลจาก Cache มาแสดงผลทันที ไม่ต้องรอหมุนโหลดใหม่จากศูนย์                |
| 3. ข้อมูลหายเมื่อรีโหลด | หน้าเว็บเกิดรีเฟรชเองแล้วข้อมูลที่กรอกไว้หายหมด                                        | Background Sync: ข้อมูลที่กรอกจะถูกพักไว้ในเครื่องก่อน และจะส่งขึ้นระบบให้อัตโนมัติเมื่อเน็ตกลับมา |
| 4. ประสบการณ์การใช้ App | ผู้ใช้รู้สึกว่าเว็บใช้งานยาก ไม่ลื่นไหลเหมือนแอป                                       | App-like UI: แสดงผลเต็มหน้าจอ (No URL bar) มีไอคอนบนหน้าจอ และตอบสนองไวเหมือนแอปจริง               |
| 5. ต้องกรอกข้อมูลซ้ำ    | พอเน็ตหลุด ต้องเริ่มพิมพ์ใหม่หมดตั้งแต่ต้น                                             | Local Storage & Sync: บันทึกสถานะการพิมพ์ไว้ในเครื่องตลอดเวลา ไม่ต้องกลัวข้อมูลสูญหาย              |

# ข้อแตกต่างของ PWA vs SPA vs Native App

| Feature            |   SPA    |   PWA    |    Native App     |
| :----------------- | :------: | :------: | :---------------: |
| Built with         | Web (JS) | Web (JS) | Platform-specific |
| Installable        |    ❌    |    ✅    |        ✅         |
| Works Offline      |    ❌    |    ✅    |        ✅         |
| App-like UX        |    ⚠     |    ✅    |        ✅         |
| Access Device APIs |    ❌    |    ⚠     |        ✅         |
| App Store Required |    ❌    |   ❌\*   |        ✅         |

_\*การใช้งาน PWA บน Safari หรือบน IOS อาจถูกจำกัด feature บางอย่าง_

# Core Building Blocks of PWA

เพื่อให้ PWA สามารถทำงานได้เหมือนกับ Native App จะมี 4 ส่วนหลักดังนี้

1. Service Worker คือ Script (JavaScript) ที่ทำงานอยู่เบื้องหลัง (Background Process) ทำหน้าที่เป็น Proxy คอยดักจับการส่งข้อมูลระหว่างเบราว์เซอร์กับเซิร์ฟเวอร์ คอยตรวจสอบการเชื่อมต่อว่าเป็น **"Online"** หรือ **"Offline"** ถ้าเป็น Offline มันจะไปดึงข้อมูลจาก Cache มาให้แทนที่จะปล่อยให้หน้าเว็บแสดง Offline
2. Caching & IndexedDB คือการเก็บไฟล์ (HTML, CSS, JS, Images) หรือข้อมูลจาก API ไว้ในหน่วยความจำของเครื่องผู้ใช้โดยตรงผ่าน Cache API **ไว้ใช้ตอน Offline** ทำให้ครั้งต่อไปที่เปิดแอป ข้อมูลจะถูกดึงจากเครื่องเราเอง ไม่ต้องรอโหลดผ่านเน็ต
3. App Manifest คือไฟล์ JSON เล็กๆ ใช้อธิบายข้อมูลสำคัญของแอปพลิเคชัน เช่น ชื่อ, ไอคอน, เวอร์ชั่น, และการตั้งค่าพื้นฐาน เพื่อบอกระบบปฏิบัติการ (Android/iOS) หรือเบราว์เซอร์ (สำหรับ PWA) ทราบว่าแอปนั้นทำงานอย่างไรและแสดงผลรูปแบบใด
4. Background Sync เป็นฟีเจอร์ที่ทำงานร่วมกับ Service Worker เพื่อจัดการเรื่องการส่งข้อมูลตอนระบบ Offline หน้าที่ของ Background Sync คือเมื่อเกิดการ Offline Service Worker จะเก็บข้อมูลนั้นไว้ในคิว (Queue) และ รอจนกว่าเน็ตจะกลับมา แล้วค่อยส่งข้อมูลขึ้น Server ให้โดยอัตโนมัติ

# ตารางลำดับเนื้อหา

| ลำดับ | เนื้อหา        |                                 ลิ้งค์                                  |
| :---: | :------------- | :---------------------------------------------------------------------: |
|   1   | App manifest   |  [Link](https://github.com/patsae/basicpwa/tree/master/1-App-Manifest)  |
|   2   | Service Worker | [Link](https://github.com/patsae/basicpwa/tree/master/2-Service-Worker) |
|   3   | Cache Strategy | [Link](https://github.com/patsae/basicpwa/tree/master/3-Cache-Strategy) |
|   4   | IndexedDB      |   [Link](https://github.com/patsae/basicpwa/tree/master/4-IndexedDB)    |
